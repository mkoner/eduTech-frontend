import React, { useState, useEffect } from 'react';
import axios from 'axios';

const Courses = () => {
    const [courses, setCourses] = useState([]);
    const [courseName, setCourseName] = useState('');

    useEffect(() => {
	getCourses();
    }, []);

    const getCourses = async () => {
	try {
	    const response = await axios.get('/api/courses');
	    setCourses(response.data);
	} catch (error) {
	    console.error(`Error fetching courses: ${error}`);
	}
    };

    const addCourse = async () => {
	try {
	    const response = await axios.post('/api/courses', { course_name: courseName });
	    setCourses([...courses, response.data]);
	} catch (error) {
	    console.error(`Error adding course: ${error}`);
	}
    };

    return (
	<div>
	    <h1>Course List</h1>
	    {courses.map((course) => (
		<div key={course.id}>
		    <h2>{course.course_name}</h2>
		</div>
	    ))}
	    <input type="text" value={courseName} onChange={(e) => setCourseName(e.target.value)} placeholder="Course Name" />
	    <button onClick={addCourse}>Add Course</button>
	</div>
	    );
};

export default Courses;
